# 第二章：语义和文法
该文档是计算机科学相关的教学资料，围绕语言及文法展开，介绍了形式语言的术语、文法的定义与分类，旨在帮助读者掌握相关概念和分类体系。

1. **语言的定义与运算**
    - **基本术语**：字母表是字符有限集；字符串由字母表中字符构成，空串用ε表示；连接是字符串拼接，有结合律等性质。还有前缀、后缀、子串、逆串等概念。
    - **字母表与语言运算**：字母表有幂运算 ， *闭包包含所有字符串和空串，+闭包不含空串。语言是字母表*闭包的子集，语言运算有并、交、补、差 ，还有积和幂运算。
2. **文法**
    - **定义与表示方法**：文法是定义语言的数学模型，有限语言可列举，无限语言常用文法产生系统或机器识别系统表示。元语言用于描述语言，BNF范式是常用元语言。
    - **Chomsky文法体系**：文法由非终结符集合N、终结符集合T、生成式集合P和起始符S构成。生成式用于产生句子，推导是基于生成式的变换，句型由起始符推导得出，句子是仅含终结符的句型，文法产生的语言是由终结符组成且从起始符推导出来的字符串集合。
3. **Chomsky文法体系分类**
    - **分类概述**：根据生成式形式，分为0型（无限制）、1型（上下文有关）、2型（上下文无关）、3型（正则）文法。
    - **特点与应用**：0型文法对应递归可枚举语言；1型文法生成式左部长度小于等于右部且不含A→ε ，用于过程调用检查；2型文法左部为单个非终结符，用于描述程序语言语法结构；3型文法分右线性和左线性，对应正则语言和有限自动机。 

| 类型   | 生成式形式限制                     | 对应语言          | 自动机模型               |
|--------|----------------------------------|-------------------|--------------------------|
| **0型** | 无限制（\( \alpha \to \beta \)）     | 递归可枚举语言    | 图灵机                   |
| **1型** | \( \alpha \to \beta \) 且 \( |\alpha| \leq |\beta| \) | 上下文有关语言    | 线性有界自动机（LBA）    |
| **2型** | \( A \to \beta \)（\( A \in N \)）   | 上下文无关语言    | 下推自动机（PDA）        |
| **3型** | 右线性（\( A \to \omega B \) 或 \( A \to \omega \)）或左线性 | 正则语言          | 有限自动机（FA）         |

## 语义的定义与运算
文档第一节围绕语言的定义与运算展开，介绍了相关术语、运算及概念，具体如下：

1. **语言的相关术语**
    - **字母表**：字符的有限集合，常用T、Σ表示，如英文字母表、汉字表等。它是构成字符串和语言的基本元素集合。
    - **字符串**：由字母表中的字符构成的有限序列，也叫字。空串用ε表示，不包含任何字符。例如，若字母表T = {a, b}，则ε、a、ba等都是T上的字符串。字符串的长度指包含的字符个数，如|ε| = 0，|bbaba| = 5。
2. **字符串的运算**
    - **连接**：设x = a₁a₂…am，y = b₁b₂…bn ，则x与y的连接xy = a₁a₂…amb₁b₂…bn。连接运算满足结合律 (xy)z = x(yz) ，且εx = xε = x ，|xy| = |x| + |y|。
    - **其他运算**：包括取头字符、取尾部、子串匹配等。若ω₁、ω₂、ω₃是字母表T上的字符串，ω₁是ω₁ω₂的前缀，ω₂是ω₁ω₂的后缀，ω₂是ω₁ω₂ω₃的子串，空串是任何字符串的前缀、后缀及子串。字符串ω的逆是其倒置，空串的逆还是空串。
3. **字母表的幂运算与闭包**
    - **幂运算**：设T为字母表，n为自然数。T⁰ = {ε} ；若X ∈ Tⁿ⁻¹，a ∈ T ，则aX ∈ Tⁿ ；Tⁿ中的元素只能按此规则生成。
    - **闭包**：星号闭包T* = T⁰ ∪ T¹ ∪ T² ∪ …，是字母表T上所有字符串和空串的集合；正闭包T⁺ = T¹ ∪ T² ∪ T³ ∪ …，是字母表T上所有字符串的集合，且T* = T⁺ ∪ {ε}，T⁺ = T* - {ε}。例如，若T = {0, 1} ，则T⁰ = {ε} ，T¹ = {0, 1} ，T² = {00, 01, 10, 11} ，T* = {ε, 0, 1, 00, 01, 10, 11, …} ，T⁺ = {0, 1, 00, 01, 10, 11, …}。
4. **语言的定义与运算**
    - **定义**：设T为字母表，任何集合L ⊆ T*都是字母表T上的一个语言。如英文单词集、C语言程序集等。
    - **运算**：语言是集合，可进行并、交、补、差运算。还有语言的积和幂运算，语言的积L₁L₂是L₁和L₂中字符串连接构成的集合，一般L₁L₂ ≠ L₂L₁；语言的幂L⁰ = {ε} ，Lⁿ = L ⋅ Lⁿ⁻¹ = Lⁿ⁻¹ ⋅ L（n ≥ 1） 。 
    - {++区别只有一个空句子的语言和空语言++}

## 文法
文档第二节聚焦于文法，对其相关概念、体系、推导过程及应用示例进行了系统阐述，具体内容如下：

假设我们有一个简单的描述句子结构的文法，用于生成类似“小明 喜欢 苹果”这样的句子。

- **终结符**：在这个例子里，像“小明”“喜欢”“苹果”这些具体的词语就是终结符。终结符是组成语言最终句子的基本单元，在推导过程中不会再被替换。就好比盖房子用的砖头，是实实在在用来搭建句子的材料，不能再分解成其他用于构建句子的符号。用专业一点的话来说，终结符集合T = {"小明", "喜欢", "苹果", "小红", "香蕉", "讨厌"}等，这些都是构成句子的最底层元素，句子就是由这些终结符按照一定规则组合而成。
- **非终结符**：假设有“<句子>”“<主语>”“<谓语>”“<宾语>”这些符号，它们就是非终结符。非终结符在推导过程中可以被替换成其他符号组合。比如“<句子>”可以根据规则替换成“<主语><谓语><宾语>”，“<主语>”又能替换成“小明”或者“小红”等终结符。这就好像是建筑图纸上的一些概念，比如“客厅”“卧室”，施工的时候会用具体的建筑材料（终结符）来把它们变成实际的空间。在这个例子里，非终结符集合N = {"<句子>", "<主语>", "<谓语>", "<宾语>"} ，它们是构建句子的“框架”元素，通过不断替换，最终生成包含终结符的句子。 

1. **文法基础概念**
    - **定义**：文法作为定义语言的数学模型，用于精确描述语言的构成规则。
    - **语言表示方法**：有限语言可采用列举法直观呈现所有元素；无限语言则借助文法产生系统或机器识别系统。前者依据设定的文法规则生成语言中的句子，后者凭借能否被识别系统接受来判定字符串是否属于该语言。
2. **元语言与BNF范式**
    - **元语言定义**：元语言专门用于描述其他语言，如程序设计语言在讨论自身特性时，它就是对象语言，而用于探讨它的语言就是元语言。
    - **BNF范式应用**：BNF范式常被用作描述程序设计语言语法的元语言。通过特定的规则定义语言元素，如规定<标识符>由字母开头，后接字母或数字组成，这明确了一类字符串在特定语言中的合法性，展现了其定义语言的功能。 
3. **Chomsky文法体系核心要素**
    - **关键组成部分**：任何文法都包含非终结符集合N、终结符集合T、生成式集合P以及起始符S。非终结符在推导过程中可被替换，终结符则是最终构成句子的基本单位；生成式是推导的依据，规定了符号的替换规则；起始符是推导的起点。
    - **形式化定义**：文法G被定义为四元组G=(N,T,P,S)。N和T分别为非终结符与终结符的有限集合，且二者无交集；P中的生成式α→β，对α和β的构成有特定要求；S作为起始符，必须属于非终结符集合N。 
    Chomsky文法体系是对文法进行分类的一种体系，在这个体系里，任何一种文法都包含四个关键部分：
        1. **非终结符集合N**：集合中的符号在推导过程中可以被替换，它们不是语言最终句子里的实际字符，而是用来帮助构建句子结构的符号。
        2. **终结符集合T**：这是构成语言句子的基本字符集合，句子就是由这些终结符组成的。
        3. **生成式集合P**：也叫形式规则集合，其中的生成式是产生语言句子的规则。这些规则规定了如何从一些符号推导出另一些符号。
        4. **起始符S**：它是推导的起点，所有句子的推导都要从这个起始符开始，不断运用生成式集合P中的规则，最终得到仅由终结符组成的句子。
        5.例如，定义一个简单的文法G来生成只包含a和b，且a在b前面的字符串，如ab、aab、aaab等：
            - **非终结符集合N**：设N = {S}，这里只有一个非终结符S，它将在推导过程中不断变换，帮助生成符合要求的句子。
            - **终结符集合T**：T = {a, b} ，表示最终生成的句子只能由a和b这两个字符组成。
            - **生成式集合P**：P = {S→aS，S→ab}。生成式S→aS表示可以用aS替换S，这样就可以不断在前面添加a；S→ab表示当推导出S时，可以用ab替换它，得到一个符合要求的句子。
            - **起始符S**：整个推导过程从S开始。
            - 以推导aab为例：从起始符S开始，根据生成式S→aS，将S替换为aS，得到aS；再根据S→aS，把aS中的S替换为aS，得到aaS；最后根据S→ab，把aaS中的S替换为ab，就得到了aab，这是一个仅由终结符a和b组成的句子，且满足a在b前面的要求。 
4. **推导与句型相关概念**
    - **直接推导**：依据文法G，若存在生成式A→β，且α、γ为特定字符串，那么αAγ可直接推导出αβγ，这是推导的基本步骤。
    - **推导序列**：从初始字符串α₀开始，经过多次直接推导，形成α₀=>α₁=>α₂=>...=>αₙ的序列，这就是推导序列，体现了从起始符逐步推导的过程。
    - **句型和句子**：满足S⇒α且α∈(N∪T)*的字符串α是句型，而当α仅由终结符组成（即α∈T*）时，它就是句子，表明句子是句型的特殊情况。
    - **文法生成语言**：文法G产生的语言L(G)，由所有从起始符S推导得出且仅由终结符构成的字符串ω组成，即L(G)={ω|ω∈T*且S⇒*ω}，明确了文法与语言之间的生成关系。 
5. {++文法产生语言的步骤++}
    - {++确定基础++}
    - {++由基础推导出递归++}
    - {++书写产生集合++}
        - {++S → 基础；S → 递归++}
        - {++终结符替换++}

## Chomsky文法体系
文档第三节主要介绍了Chomsky文法体系分类，具体内容如下：

1. **Chomsky文法体系分类概述**：Chomsky文法体系根据生成式的形式，将文法分为四类，即0型、1型、2型、3型文法，所有符合该体系的文法都要满足一定的生成式条件。
2. **各类文法详细介绍**
    - **0型文法（无限制文法）**：对生成式没有特殊限制，只要满足α∈(N∪T)*N+(N∪T)*，β∈(N∪T)*即可。它对应的语言是递归可枚举语言，这种语言与图灵机等价，意味着图灵机可以识别和处理由0型文法生成的语言。
    - **1型文法（上下文有关文法，CSG）**：生成式形式为α→β，要求|α|≤|β|，且β∈(N∪T)+ ，α∈(N∪T)*N+(N∪T)* 。它对应的语言是上下文有关语言（CSL），若不考虑空串ε，与线性有界自动机（LBA）等价。实际应用中，像过程调用时形参与实参的一致性检查等场景会用到上下文有关的特性。例如，在一个函数调用中，函数的参数类型和数量必须与定义时一致，这就类似于1型文法中对生成式左右两边的限制，只有在特定“上下文”条件满足时才能进行推导。
    - **2型文法（上下文无关文法，CFG）**：生成式为A→α的形式，其中A∈N，α∈(N∪T)* 。对应的语言是上下文无关语言（CFL），与下推自动机（PDA）对应。它的特点是左部是单个非终结符，这种特性使得它在表示句子的语法结构方面非常有效，如表达式、嵌套结构等。目前的程序设计语言主要采用上下文无关文法来描述语法结构，因为它可以清晰地定义各种语法元素的组成规则。
    - **3型文法（正则文法）**：分为右线性文法（A→ωB或A→ω ）和左线性文法（A→Bω或A→ω ），其中A, B∈N，ω∈T* 。对应的语言是正则语言，与有限自动机对应。正则文法生成的语言结构相对简单，在处理一些具有固定模式的字符串识别任务中应用广泛。
3. **文法分类示例**：通过给出多个具体的文法示例，如G = ({A, B, C}, {a, b, d}, P, A) 、G = ({A, B, C}, {a, b, c}, P, A)等，分别说明了它们属于哪种类型的文法，并展示了如何根据生成式进行推导，进一步加深对不同类型文法的理解。
4. **四类文法关系**：0型文法无限制，1型文法不允许A→ε形式；不含A→ε的2型、3型属于1型，1型、2型、3型均属于0型。这种关系体现了不同类型文法在生成式限制上的逐渐加强，从0型到3型，文法的生成能力逐渐减弱，但对语言结构的描述更加具体和规范。

Chomsky文法体系分为0型、1型、2型、3型文法，以下为你分别举例说明：

- **0型文法（无限制文法）**：文法$G = (\{S, A, B\}, \{0, 1\}, P, S)$，其中$P$包含生成式：$S \to 0AB$、$AB \to 1B$、$B \to \varepsilon$。在这个文法中，对生成式几乎没有限制，只要符合从非终结符和终结符组成的符号串进行变换的规则即可。例如，从起始符$S$开始推导：$S \Rightarrow 0AB \Rightarrow 01B \Rightarrow 01$，这里$01$是由终结符组成的字符串，属于该文法生成的语言。它对应的语言是递归可枚举语言，与图灵机等价，意味着理论上图灵机可以识别和生成由这种文法产生的所有字符串。
- **1型文法（上下文有关文法）**：给定文法$G = (\{S, A, B, C\}, \{a, b, c\}, P, S)$，$P$中生成式为：$S \to aSBC$、$S \to aBC$、$CB \to BC$、$aB \to ab$、$bB \to bb$、$bC \to bc$、$cC \to cc$。1型文法要求生成式左部的长度小于等于右部，且不含$A \to \varepsilon$形式。例如推导过程：$S \Rightarrow aSBC \Rightarrow a^2BCBC \Rightarrow a^2BBCC \Rightarrow a^2bBCC \Rightarrow a^2bbCC \Rightarrow a^2bbcC \Rightarrow a^2bbcc$。在实际程序语言中，过程调用时形参与实参的一致性检查就类似于1型文法的应用场景，只有在满足特定上下文条件时，才能进行符号的推导变换。
- **2型文法（上下文无关文法）**：以文法$G = (\{S, A, B\}, \{a, b\}, P, S)$为例，$P$包含：$S \to aA$、$S \to bB$、$A \to aA$、$A \to b$、$B \to bB$、$B \to a$ 。2型文法的特点是生成式左部是单个非终结符。如推导过程：$S \Rightarrow aA \Rightarrow a^2A \Rightarrow a^2b$。它对应的语言是上下文无关语言，在描述程序语言的语法结构方面应用广泛，比如常见的表达式、嵌套结构等都可以用2型文法来表示。
- **3型文法（正则文法）**：右线性文法$G = (\{S, A\}, \{a, b\}, P, S)$，$P$为：$S \to aA$、$S \to a$、$A \to bA$、$A \to b$ 。3型文法分为右线性和左线性，右线性文法的生成式形式为$A \to \omega B$或$A \to \omega$ 。例如推导：$S \Rightarrow aA \Rightarrow abA \Rightarrow abb$。它对应的语言是正则语言，常用于处理一些具有固定模式的字符串识别，如简单的词法分析等场景。 
Chomsky定义的四种文法类型，即0型、1型、2型和3型文法，它们在生成式规则、语言描述能力和应用场景等方面存在联系与区别：
- **区别**
    - **生成式规则限制不同**：0型文法对生成式基本没有限制，只要满足α∈(N∪T)*N+(N∪T)*，β∈(N∪T)*即可；1型文法要求生成式α→β满足|α|≤|β|（除了α→ε这种特殊情况） ，限制了生成式左右两边的长度关系；2型文法要求生成式左部为单个非终结符，即A→α（A∈N，α∈(N∪T)* ）；3型文法分为右线性（A→ωB或A→ω ）和左线性（A→Bω或A→ω ），进一步限制了生成式的形式，其中A, B∈N，ω∈T* 。
    - **语言描述能力不同**：0型文法生成能力最强，能产生递归可枚举语言；1型文法生成能力次之，产生上下文有关语言；2型文法生成能力更弱一些，用于产生上下文无关语言；3型文法生成能力最弱，生成正则语言。随着文法类型从0型到3型，对语言结构的描述越来越具体和受限，能够生成的语言集合也逐渐变小。
    - **应用场景不同**：0型文法与图灵机等价，理论上可用于描述任何可计算的语言，但实际应用较少；1型文法用于一些需要考虑上下文条件的场景，如程序语言中过程调用时形参与实参的一致性检查；2型文法广泛应用于描述程序设计语言的语法结构，像表达式、语句等；3型文法常用于处理具有固定模式的字符串识别，如词法分析。 
- **联系**：1型、2型、3型文法都是在0型文法的基础上，通过增加生成式的限制条件得到的。不含A→ε形式的2型、3型文法属于1型文法，而1型、2型、3型文法又都属于0型文法。这意味着，能够用3型文法描述的语言，一定可以用2型、1型和0型文法描述；能用2型文法描述的语言，也能用1型和0型文法描述；能用1型文法描述的语言，同样能用0型文法描述，但反之不一定成立。 